{"filter":false,"title":"d3.chart.common.js","tooltip":"/d3/d3.chart.common.js","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":49}},"text":"/* d3.chart.setting.js - D3 Chart Common Library."},{"action":"insertText","range":{"start":{"row":0,"column":49},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":734,"column":0}},"lines":[" \twrit by yi seung-yong(dragonslam@nate.com)"," \tdate, 2014/10/04","*/","if (typeof com == 'undefined') var com = {};","if (typeof com.mad == 'undefined') com.mad = {};","if (typeof com.mad.chart == 'undefined') com.mad.chart = {};","","/** ****************************************************************************","\tChart API ","**/","com.mad.chart.handler = function(obj, option) {","\tif (!d3)\t{","\t\t$debug(\"Not Found D3 Library.\");","\t\tthrow new Error(\"D3 Object Exception\");","\t}","\tthis.oContaner\t= obj;","\tthis.oOption\t= (option instanceof Array) ? option[0] : option;","\tthis.oOptions\t= (option instanceof Array) ? option : null;","};","com.mad.chart.handler.prototype = {","\tlogging : function(msg) {","\t\t$debug(\"com.mad.chart : \"+ msg);","\t},","\tempty : function() {","\t\t$(this.oContaner).hide('slow').empty().show();","\t\treturn this;","\t},","\tmessage : function(t) {","\t\t$(this.oContaner).empty().append(t);","\t\treturn this;","\t},","\tdraw : function(data, addonOption) {","\t\tvar This = this;","\t\tvar D3_Center = function(w, h) {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", (typeof w == 'number') ? w : This.oOption.width)","\t\t\t\t\t.attr(\"height\", (typeof h == 'number') ? h : This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + ((typeof w == 'number') ? w : This.oOption.width) / 2 + \",\" + ((typeof h == 'number') ? h : This.oOption.height) / 2 + \")\");","\t\t};","\t\tvar D3_Axis = function() {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", This.oOption.width)","\t\t\t\t\t.attr(\"height\", This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + This.oOption.margin.left + \",\" + This.oOption.margin.top + \")\");","\t\t};","","\t\tvar drawLineGraph = function(data, addOption) {","\t\t};","","\t\tvar drawMultiLineGraph = function(data, addOption) {","\t\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.date = This.oOption.format(d.date);","\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\tvar margin = This.oOption.margin;","\t\t\tvar width = This.oOption.width - margin.left - margin.right;","\t\t\tvar height = This.oOption.height - margin.top - margin.bottom;","","\t\t\tvar x = d3.time.scale().range([0, width]);","\t\t\tvar y = d3.scale.linear().range([height, 0]);","\t\t\tvar color\t = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","\t\t\tvar line\t = d3.svg.line()","\t\t\t\t //.interpolate(\"basis\")","\t\t\t\t .x(function(d) { return x(d.date); })","\t\t\t\t .y(function(d) { return y(d.value); });","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks).tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks);","\t\t\t}","\t\t\tcolor.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tvar lineData = color.domain().map(function(name) {","\t\t\t\treturn {","\t\t\t\t\tname: name,","\t\t\t\t\tvalues: data.map(function(d) {","\t\t\t\t\t\treturn {date: d.date, value: +d[name]};","\t\t\t\t\t})","\t\t\t\t};","\t\t\t});","","\t\t\tx.domain(d3.extent(data, function(d) { return d.date; }));","\t\t\ty.domain([","\t\t\t\td3.min(lineData, function(c) { return d3.min(c.values, function(v) { return v.value; }); }),","\t\t\t\td3.max(lineData, function(c) { return d3.max(c.values, function(v) { return v.value; }); })","\t\t\t]);","","\t\t\tvar svg\t = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis);\t","","\t\t\tvar graph= svg.selectAll(\".LineGraph\")","\t\t\t\t.data(lineData)","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tgraph.append(\"path\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss)","\t\t\t\t.attr(\"d\", function(d) { return line(d.values); })","\t\t\t\t.style(\"stroke\", function(d) { return color(d.name); });","","\t\t\tif (This.oOption.showLabels) {\t\t\t","\t\t\t\tgraph.append(\"text\")","\t\t\t\t\t.datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + x(d.value.date) + \",\" + y(d.value.value) + \")\"; })","\t\t\t\t\t.attr(\"x\", 8)","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t//.attr(\"class\", \"lable\")","\t\t\t\t\t.attr(\"font-size\", \"12px\")","\t\t\t\t\t.attr(\"fill\", function(d) { return color(d.name); })","\t\t\t\t\t.text(function(d) { return d.name; });","\t\t\t\t\t","\t\t\t\t\t//","\t\t\t}","\t\t\t","\t\t\tlineData.forEach(function(item) {\t\t\t\t","\t\t\t\tvar point_type = \"circle\",","\t\t\t\t\t point_size = 6,","\t\t\t\t\t point_fill = \"#fff\";","\t\t\t\tif (addOption && addOption.point) {","\t\t\t\t\tpoint_type\t= addOption.point.type;","\t\t\t\t\tpoint_size\t= addOption.point.size;","\t\t\t\t\tpoint_fill\t\t= addOption.point.fill ? color(item.name) : point_fill;","\t\t\t\t}","\t\t\t\tif (point_type == \"circle\") {\t\t\t\t","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"r\", point_size)","\t\t\t\t\t\t\t.attr(\"cx\", function(d, i) { return x(d.date);  })","\t\t\t\t\t\t\t.attr(\"cy\", function(d, i) { return y(d.value); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) { ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size + 2);\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\tvar tX = x(d.date) - 3, ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value) + 3;","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 3;","\t\t\t\t\t\t\t\t\t\ttY = 20;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size);","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t} ","\t\t\t\t","\t\t\t\telse {","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"width\", point_size)","\t\t\t\t\t\t\t.attr(\"height\", point_size)","\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size + 2).attr(\"height\", point_size + 2)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - ((point_size+2)/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - ((point_size+2)/2); })","\t\t\t\t\t\t\t\t\t;","\t\t\t\t\t\t\t\t\tvar tX = x(d.date), ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value);","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 5;","\t\t\t\t\t\t\t\t\t\ttY = 10;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size).attr(\"height\", point_size)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t\t\t;","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t}","\t\t\t});","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '5').attr('ry', '5');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"55\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/\t\t\t","\t\t\t$('svg .point').tipsy({ ","\t\t\t\tgravity: 's', ","\t\t\t\thtml: true,","\t\t        fade: true,","\t\t        opacity: 0.95,","\t\t\t\ttitle: function() {","\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\treturn String(d.value).money(); ","\t\t\t\t}","\t\t\t});","\t\t// multi line.","\t\t};","","\t\tvar drawBarGraph = function(data, addOption) {","\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.key = This.oOption.format(d.key);","\t\t\t\t});","\t\t\t}","\t\t\tvar option\t= This.oOption;","\t\t\tvar margin\t= option.margin;","\t\t\tvar width\t= option.width - margin.left - margin.right;","\t\t\tvar height\t= option.height - margin.top - margin.bottom;","","\t\t\tvar c\t= d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.ordinal().rangeRoundBands([0, width], .1);","\t\t\tvar y\t= d3.scale.linear().range([height, 0]);","\t\t\tvar xAxis = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%').tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%');","\t\t\t}","","\t\t\tc.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tx.domain(data.map(function(d) { return d.key; }));","\t\t\ty.domain([0, (d3.max(data, function(d) { return d.value; }) < .1 ? .1 : d3.max(data, function(d) { return d.value; }) )]);","\t\t\tvar blank= x.rangeBand() * .3;","\t\t\tvar svg = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\t","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis)/*","\t\t\t\t\t.append(\"text\")","\t\t\t\t\t\t.attr(\"transform\", \"rotate(-90)\")","\t\t\t\t\t\t.attr(\"y\", 6)","\t\t\t\t\t\t.attr(\"dy\", \".71em\")","\t\t\t\t\t\t.style(\"text-anchor\", \"end\")","\t\t\t\t\t\t.text(\"Traffic\")","\t\t\t\t*/","\t\t\t\t;","\t\t\t\t\t\t\t\t","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", 0)","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", height);","","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.attr(\"class\", \"bar2\")","\t\t\t\t\t.style(\"fill\", function(d) { return c(d.key); })","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.value); })","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", function(d) { return height - y(d.value); })","\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke\", \"#fff\").style(\"stroke-width\", \"5px\").style(\"stroke-opacity\", \".4\");","\t\t\t\t\t\t\tvar tX = x(d.key)-blank;","\t\t\t\t\t\t\tvar tY = y(d.value)+5;","//\t\t\t\t\t\t\ttooltip(true, ((tX > width + margin.right - 110) ? width - 110 : tX), ((tY < (20 - margin.top)) ? 20 : tY), c(d.key), d.text);","\t\t\t\t\t\t}","\t\t\t\t\t})","\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke-width\", \"0px\");","//\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t","\t\t\t\t$('svg .bar2').tipsy({ ","\t\t\t\t\tgravity: 's', ","\t\t\t\t\thtml: true,","\t\t\t        fade: true,","\t\t\t        opacity: 0.95,","\t\t\t\t\ttitle: function() {","\t\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\t\treturn d.text; ","\t\t\t\t\t}","\t\t\t\t});","\t\t\tif (option.showLabels) {","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key); })","\t\t\t\t\t.attr(\"y\", function(d) { ","\t\t\t\t\t\tvar v = y(d.value);","\t\t\t\t\t\treturn (v < 15) ? 15 : (v > height-10 ? height-10 : v); ","\t\t\t\t\t})","\t\t\t\t\t.style(\"fill\", \"#000\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { return (d.value == 0) ? '' : d.text; });","\t\t\t}","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '3').attr('ry', '3');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"110\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/","\t\t};","","\t\tvar drawPieGraph = function(data, addOption) ","\t\t{","\t\t\tvar radius = Math.min(This.oOption.width, This.oOption.height) / 2;","\t\t\tvar color = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar arc = d3.svg.arc()","\t\t\t\t.outerRadius(radius - This.oOption.arcOuter)","\t\t\t\t.innerRadius(radius - This.oOption.arcInner);","","\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t.value(function(d) { return d.value; });","","\t\t\tvar svg = D3_Center();","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","","\t\t\tvar g = svg.selectAll(\".arc\")","\t\t\t\t.data(pie(data))","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tg.append(\"path\")","\t\t\t\t.attr(\"d\", arc)","\t\t\t\t.style(\"fill\", function(d) { return color(d.data.name); });","","\t\t\tif (typeof This.oOption.lines == 'object' && This.oOption.lines instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lines instanceof Array) {","\t\t\t\tfor (var i = addOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","","\t\t\tif (typeof This.oOption.lables == 'object' && This.oOption.lables instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lables instanceof Array) {","\t\t\t\tfor (var i = addOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","","\t\t\tif (This.oOption.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t.text(function(d) { return d.data.name; });","\t\t\t}","\t\t};","","\t\tvar drawPiePartitionGraph = function(data, addOption) ","\t\t{","\t\t\tif (This.oOptions.length > 0)","\t\t\t{","\t\t\t\tvar svg = D3_Center();","","\t\t\t\tfor (var i = This.oOptions.length-1; i >= 0; i--)","\t\t\t\t{","\t\t\t\t\tvar option = This.oOptions[i];","\t\t\t\t\tvar radius = Math.min(option.width, option.height) / 2;","\t\t\t\t\tvar color = d3.scale.ordinal().range(option.colors);","\t\t\t\t\tvar arc = d3.svg.arc()","\t\t\t\t\t\t.outerRadius(radius - option.arcOuter)","\t\t\t\t\t\t.innerRadius(radius - option.arcInner);","","\t\t\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t\t\t.value(function(d) { return (d.depth == i) ? d.value : null; });","","\t\t\t\t\t","\t\t\t\t\tif (typeof option.background == 'object' && option.background != null && option.background.length > 0) {","\t\t\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), option.background);","\t\t\t\t\t}","","\t\t\t\t\tvar g = svg.selectAll(\".arc ._\"+ i +\"\")","\t\t\t\t\t\t.data(pie(data))","\t\t\t\t\t\t.enter().append(\"g\")","\t\t\t\t\t\t.attr(\"class\", option.styleCalss);","","\t\t\t\t\tg.append(\"path\")","\t\t\t\t\t\t.attr(\"d\", arc)","\t\t\t\t\t\t.style(\"fill\", function(d) { return color(d.data.name); });","\t\t\t\t\t\t","\t\t\t\t\tif (option.showLabels) {","\t\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t\t\t.text(function(d) { return (d.data.value > 0) ? d.data.name : ''; });","\t\t\t\t\t}","\t\t\t\t}// for","\t\t\t}","\t\t};","","\t\tvar drawBandGraph = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", width)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 35; })","\t\t\t\t.style(\"fill\", \"#335\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"900\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 10; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 5; })","\t\t\t\t.style(\"fill\", \"#fefefe\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.value + d.prepix; });","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t\t","\t\t};","","\t\tvar drawBandGraph2 = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width - option.margin.right])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", width-option.margin.right)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return width - option.margin.right + 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+2; })","\t\t\t\t.style(\"fill\", \"#666\")","\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tif (option.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { ","\t\t\t\t\t\tvar v = Math.abs(x(d.value) - x(0));\t\t\t\t\t\t","\t\t\t\t\t\treturn  (v < 55) ? v + 5 : v - 50;","\t\t\t\t\t})","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+3; })","\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { ","\t\t\t\t\t\tvar v = d.value * 100; ","\t\t\t\t\t\treturn (v % 10 == 0 ? v : (v).toFixed(2)) + \"%\"; ","\t\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t};","\t\t","\t\tvar drawRadarGraph = function(data, addOption) {","\t\t\tvar w = This.oOption.width,","\t\t\t\th = This.oOption.height;","","\t\t\t//Options for the Radar chart, other than default","\t\t\tvar mycfg = {","\t\t\t\tw: w-130,","\t\t\t\th: h-50,","\t\t\t\tmaxValue: 1,","\t\t\t\tlevels: 5,","\t\t\t\tTranslateX: 45,","\t\t\t\tTranslateY: 32,","\t\t\t\tExtraWidthX: 140,","\t\t\t\tExtraWidthY: 50,","\t\t\t\tcolor : d3.scale.ordinal().range(This.oOption.colors),","\t\t\t\tviewLevel : This.oOption.showLabels,","\t\t\t\tviewLable : This.oOption.showLabels","\t\t\t};","","\t\t\t//Call function to draw the Radar chart","\t\t\t//Will expect that data is in %'s","\t\t\tRadarChart.draw(This.oContaner, data, mycfg);","","\t\t\tvar svg = d3.select(This.oContaner)","\t\t\t\t.selectAll('svg')","\t\t\t\t.append('svg')","\t\t\t\t.attr(\"width\", w)","\t\t\t\t.attr(\"height\", h)","\t\t\t","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","\t\t};","","\t\tvar drawImages = function(obj, imgs) {","\t\t\tfor (var i =0; i < imgs.length ; i++)","\t\t\t{","\t\t\t\tobj.enter()","\t\t\t\t\t.append(\"svg:image\")","\t\t\t\t\t.attr(\"xlink:href\", imgs[i].href)","\t\t\t\t\t.attr(\"x\", imgs[i].x)","\t\t\t\t\t.attr(\"y\", imgs[i].y)","\t\t\t\t\t.attr(\"width\", imgs[i].width)","\t\t\t\t\t.attr(\"height\", imgs[i].height);","\t\t\t}","\t\t};","","","\t\t// Rander Graph...","\t\t$(This.oContaner).hide().empty();","\t\tswitch (this.oOption.type) {","\t\t\tcase 'line' :","\t\t\t\tdrawLineGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'multiLine' :","\t\t\t\tdrawMultiLineGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'bar' :","\t\t\t\tdrawBarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'pie' :","\t\t\t\tdrawPieGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'piePartition' :","\t\t\t\tdrawPiePartitionGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band' :","\t\t\t\tdrawBandGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band2' :","\t\t\t\tdrawBandGraph2(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'radarChart' : ","\t\t\t\tdrawRadarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t}","\t\t$(This.oContaner).show('fast');","","\t}"]},{"action":"insertText","range":{"start":{"row":734,"column":0},"end":{"row":734,"column":2}},"text":"};"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":734,"column":0},"end":{"row":734,"column":2}},"text":"};"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":734,"column":0}},"nl":"\n","lines":["/* d3.chart.setting.js - D3 Chart Common Library."," \twrit by yi seung-yong(dragonslam@nate.com)"," \tdate, 2014/10/04","*/","if (typeof com == 'undefined') var com = {};","if (typeof com.mad == 'undefined') com.mad = {};","if (typeof com.mad.chart == 'undefined') com.mad.chart = {};","","/** ****************************************************************************","\tChart API ","**/","com.mad.chart.handler = function(obj, option) {","\tif (!d3)\t{","\t\t$debug(\"Not Found D3 Library.\");","\t\tthrow new Error(\"D3 Object Exception\");","\t}","\tthis.oContaner\t= obj;","\tthis.oOption\t= (option instanceof Array) ? option[0] : option;","\tthis.oOptions\t= (option instanceof Array) ? option : null;","};","com.mad.chart.handler.prototype = {","\tlogging : function(msg) {","\t\t$debug(\"com.mad.chart : \"+ msg);","\t},","\tempty : function() {","\t\t$(this.oContaner).hide('slow').empty().show();","\t\treturn this;","\t},","\tmessage : function(t) {","\t\t$(this.oContaner).empty().append(t);","\t\treturn this;","\t},","\tdraw : function(data, addonOption) {","\t\tvar This = this;","\t\tvar D3_Center = function(w, h) {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", (typeof w == 'number') ? w : This.oOption.width)","\t\t\t\t\t.attr(\"height\", (typeof h == 'number') ? h : This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + ((typeof w == 'number') ? w : This.oOption.width) / 2 + \",\" + ((typeof h == 'number') ? h : This.oOption.height) / 2 + \")\");","\t\t};","\t\tvar D3_Axis = function() {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", This.oOption.width)","\t\t\t\t\t.attr(\"height\", This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + This.oOption.margin.left + \",\" + This.oOption.margin.top + \")\");","\t\t};","","\t\tvar drawLineGraph = function(data, addOption) {","\t\t};","","\t\tvar drawMultiLineGraph = function(data, addOption) {","\t\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.date = This.oOption.format(d.date);","\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\tvar margin = This.oOption.margin;","\t\t\tvar width = This.oOption.width - margin.left - margin.right;","\t\t\tvar height = This.oOption.height - margin.top - margin.bottom;","","\t\t\tvar x = d3.time.scale().range([0, width]);","\t\t\tvar y = d3.scale.linear().range([height, 0]);","\t\t\tvar color\t = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","\t\t\tvar line\t = d3.svg.line()","\t\t\t\t //.interpolate(\"basis\")","\t\t\t\t .x(function(d) { return x(d.date); })","\t\t\t\t .y(function(d) { return y(d.value); });","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks).tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks);","\t\t\t}","\t\t\tcolor.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tvar lineData = color.domain().map(function(name) {","\t\t\t\treturn {","\t\t\t\t\tname: name,","\t\t\t\t\tvalues: data.map(function(d) {","\t\t\t\t\t\treturn {date: d.date, value: +d[name]};","\t\t\t\t\t})","\t\t\t\t};","\t\t\t});","","\t\t\tx.domain(d3.extent(data, function(d) { return d.date; }));","\t\t\ty.domain([","\t\t\t\td3.min(lineData, function(c) { return d3.min(c.values, function(v) { return v.value; }); }),","\t\t\t\td3.max(lineData, function(c) { return d3.max(c.values, function(v) { return v.value; }); })","\t\t\t]);","","\t\t\tvar svg\t = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis);\t","","\t\t\tvar graph= svg.selectAll(\".LineGraph\")","\t\t\t\t.data(lineData)","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tgraph.append(\"path\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss)","\t\t\t\t.attr(\"d\", function(d) { return line(d.values); })","\t\t\t\t.style(\"stroke\", function(d) { return color(d.name); });","","\t\t\tif (This.oOption.showLabels) {\t\t\t","\t\t\t\tgraph.append(\"text\")","\t\t\t\t\t.datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + x(d.value.date) + \",\" + y(d.value.value) + \")\"; })","\t\t\t\t\t.attr(\"x\", 8)","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t//.attr(\"class\", \"lable\")","\t\t\t\t\t.attr(\"font-size\", \"12px\")","\t\t\t\t\t.attr(\"fill\", function(d) { return color(d.name); })","\t\t\t\t\t.text(function(d) { return d.name; });","\t\t\t\t\t","\t\t\t\t\t//","\t\t\t}","\t\t\t","\t\t\tlineData.forEach(function(item) {\t\t\t\t","\t\t\t\tvar point_type = \"circle\",","\t\t\t\t\t point_size = 6,","\t\t\t\t\t point_fill = \"#fff\";","\t\t\t\tif (addOption && addOption.point) {","\t\t\t\t\tpoint_type\t= addOption.point.type;","\t\t\t\t\tpoint_size\t= addOption.point.size;","\t\t\t\t\tpoint_fill\t\t= addOption.point.fill ? color(item.name) : point_fill;","\t\t\t\t}","\t\t\t\tif (point_type == \"circle\") {\t\t\t\t","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"r\", point_size)","\t\t\t\t\t\t\t.attr(\"cx\", function(d, i) { return x(d.date);  })","\t\t\t\t\t\t\t.attr(\"cy\", function(d, i) { return y(d.value); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) { ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size + 2);\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\tvar tX = x(d.date) - 3, ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value) + 3;","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 3;","\t\t\t\t\t\t\t\t\t\ttY = 20;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size);","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t} ","\t\t\t\t","\t\t\t\telse {","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"width\", point_size)","\t\t\t\t\t\t\t.attr(\"height\", point_size)","\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size + 2).attr(\"height\", point_size + 2)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - ((point_size+2)/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - ((point_size+2)/2); })","\t\t\t\t\t\t\t\t\t;","\t\t\t\t\t\t\t\t\tvar tX = x(d.date), ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value);","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 5;","\t\t\t\t\t\t\t\t\t\ttY = 10;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size).attr(\"height\", point_size)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t\t\t;","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t}","\t\t\t});","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '5').attr('ry', '5');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"55\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/\t\t\t","\t\t\t$('svg .point').tipsy({ ","\t\t\t\tgravity: 's', ","\t\t\t\thtml: true,","\t\t        fade: true,","\t\t        opacity: 0.95,","\t\t\t\ttitle: function() {","\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\treturn String(d.value).money(); ","\t\t\t\t}","\t\t\t});","\t\t// multi line.","\t\t};","","\t\tvar drawBarGraph = function(data, addOption) {","\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.key = This.oOption.format(d.key);","\t\t\t\t});","\t\t\t}","\t\t\tvar option\t= This.oOption;","\t\t\tvar margin\t= option.margin;","\t\t\tvar width\t= option.width - margin.left - margin.right;","\t\t\tvar height\t= option.height - margin.top - margin.bottom;","","\t\t\tvar c\t= d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.ordinal().rangeRoundBands([0, width], .1);","\t\t\tvar y\t= d3.scale.linear().range([height, 0]);","\t\t\tvar xAxis = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%').tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%');","\t\t\t}","","\t\t\tc.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tx.domain(data.map(function(d) { return d.key; }));","\t\t\ty.domain([0, (d3.max(data, function(d) { return d.value; }) < .1 ? .1 : d3.max(data, function(d) { return d.value; }) )]);","\t\t\tvar blank= x.rangeBand() * .3;","\t\t\tvar svg = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\t","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis)/*","\t\t\t\t\t.append(\"text\")","\t\t\t\t\t\t.attr(\"transform\", \"rotate(-90)\")","\t\t\t\t\t\t.attr(\"y\", 6)","\t\t\t\t\t\t.attr(\"dy\", \".71em\")","\t\t\t\t\t\t.style(\"text-anchor\", \"end\")","\t\t\t\t\t\t.text(\"Traffic\")","\t\t\t\t*/","\t\t\t\t;","\t\t\t\t\t\t\t\t","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", 0)","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", height);","","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.attr(\"class\", \"bar2\")","\t\t\t\t\t.style(\"fill\", function(d) { return c(d.key); })","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.value); })","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", function(d) { return height - y(d.value); })","\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke\", \"#fff\").style(\"stroke-width\", \"5px\").style(\"stroke-opacity\", \".4\");","\t\t\t\t\t\t\tvar tX = x(d.key)-blank;","\t\t\t\t\t\t\tvar tY = y(d.value)+5;","//\t\t\t\t\t\t\ttooltip(true, ((tX > width + margin.right - 110) ? width - 110 : tX), ((tY < (20 - margin.top)) ? 20 : tY), c(d.key), d.text);","\t\t\t\t\t\t}","\t\t\t\t\t})","\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke-width\", \"0px\");","//\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t","\t\t\t\t$('svg .bar2').tipsy({ ","\t\t\t\t\tgravity: 's', ","\t\t\t\t\thtml: true,","\t\t\t        fade: true,","\t\t\t        opacity: 0.95,","\t\t\t\t\ttitle: function() {","\t\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\t\treturn d.text; ","\t\t\t\t\t}","\t\t\t\t});","\t\t\tif (option.showLabels) {","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key); })","\t\t\t\t\t.attr(\"y\", function(d) { ","\t\t\t\t\t\tvar v = y(d.value);","\t\t\t\t\t\treturn (v < 15) ? 15 : (v > height-10 ? height-10 : v); ","\t\t\t\t\t})","\t\t\t\t\t.style(\"fill\", \"#000\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { return (d.value == 0) ? '' : d.text; });","\t\t\t}","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '3').attr('ry', '3');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"110\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/","\t\t};","","\t\tvar drawPieGraph = function(data, addOption) ","\t\t{","\t\t\tvar radius = Math.min(This.oOption.width, This.oOption.height) / 2;","\t\t\tvar color = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar arc = d3.svg.arc()","\t\t\t\t.outerRadius(radius - This.oOption.arcOuter)","\t\t\t\t.innerRadius(radius - This.oOption.arcInner);","","\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t.value(function(d) { return d.value; });","","\t\t\tvar svg = D3_Center();","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","","\t\t\tvar g = svg.selectAll(\".arc\")","\t\t\t\t.data(pie(data))","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tg.append(\"path\")","\t\t\t\t.attr(\"d\", arc)","\t\t\t\t.style(\"fill\", function(d) { return color(d.data.name); });","","\t\t\tif (typeof This.oOption.lines == 'object' && This.oOption.lines instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lines instanceof Array) {","\t\t\t\tfor (var i = addOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","","\t\t\tif (typeof This.oOption.lables == 'object' && This.oOption.lables instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lables instanceof Array) {","\t\t\t\tfor (var i = addOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","","\t\t\tif (This.oOption.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t.text(function(d) { return d.data.name; });","\t\t\t}","\t\t};","","\t\tvar drawPiePartitionGraph = function(data, addOption) ","\t\t{","\t\t\tif (This.oOptions.length > 0)","\t\t\t{","\t\t\t\tvar svg = D3_Center();","","\t\t\t\tfor (var i = This.oOptions.length-1; i >= 0; i--)","\t\t\t\t{","\t\t\t\t\tvar option = This.oOptions[i];","\t\t\t\t\tvar radius = Math.min(option.width, option.height) / 2;","\t\t\t\t\tvar color = d3.scale.ordinal().range(option.colors);","\t\t\t\t\tvar arc = d3.svg.arc()","\t\t\t\t\t\t.outerRadius(radius - option.arcOuter)","\t\t\t\t\t\t.innerRadius(radius - option.arcInner);","","\t\t\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t\t\t.value(function(d) { return (d.depth == i) ? d.value : null; });","","\t\t\t\t\t","\t\t\t\t\tif (typeof option.background == 'object' && option.background != null && option.background.length > 0) {","\t\t\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), option.background);","\t\t\t\t\t}","","\t\t\t\t\tvar g = svg.selectAll(\".arc ._\"+ i +\"\")","\t\t\t\t\t\t.data(pie(data))","\t\t\t\t\t\t.enter().append(\"g\")","\t\t\t\t\t\t.attr(\"class\", option.styleCalss);","","\t\t\t\t\tg.append(\"path\")","\t\t\t\t\t\t.attr(\"d\", arc)","\t\t\t\t\t\t.style(\"fill\", function(d) { return color(d.data.name); });","\t\t\t\t\t\t","\t\t\t\t\tif (option.showLabels) {","\t\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t\t\t.text(function(d) { return (d.data.value > 0) ? d.data.name : ''; });","\t\t\t\t\t}","\t\t\t\t}// for","\t\t\t}","\t\t};","","\t\tvar drawBandGraph = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", width)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 35; })","\t\t\t\t.style(\"fill\", \"#335\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"900\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 10; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 5; })","\t\t\t\t.style(\"fill\", \"#fefefe\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.value + d.prepix; });","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t\t","\t\t};","","\t\tvar drawBandGraph2 = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width - option.margin.right])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", width-option.margin.right)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return width - option.margin.right + 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+2; })","\t\t\t\t.style(\"fill\", \"#666\")","\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tif (option.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { ","\t\t\t\t\t\tvar v = Math.abs(x(d.value) - x(0));\t\t\t\t\t\t","\t\t\t\t\t\treturn  (v < 55) ? v + 5 : v - 50;","\t\t\t\t\t})","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+3; })","\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { ","\t\t\t\t\t\tvar v = d.value * 100; ","\t\t\t\t\t\treturn (v % 10 == 0 ? v : (v).toFixed(2)) + \"%\"; ","\t\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t};","\t\t","\t\tvar drawRadarGraph = function(data, addOption) {","\t\t\tvar w = This.oOption.width,","\t\t\t\th = This.oOption.height;","","\t\t\t//Options for the Radar chart, other than default","\t\t\tvar mycfg = {","\t\t\t\tw: w-130,","\t\t\t\th: h-50,","\t\t\t\tmaxValue: 1,","\t\t\t\tlevels: 5,","\t\t\t\tTranslateX: 45,","\t\t\t\tTranslateY: 32,","\t\t\t\tExtraWidthX: 140,","\t\t\t\tExtraWidthY: 50,","\t\t\t\tcolor : d3.scale.ordinal().range(This.oOption.colors),","\t\t\t\tviewLevel : This.oOption.showLabels,","\t\t\t\tviewLable : This.oOption.showLabels","\t\t\t};","","\t\t\t//Call function to draw the Radar chart","\t\t\t//Will expect that data is in %'s","\t\t\tRadarChart.draw(This.oContaner, data, mycfg);","","\t\t\tvar svg = d3.select(This.oContaner)","\t\t\t\t.selectAll('svg')","\t\t\t\t.append('svg')","\t\t\t\t.attr(\"width\", w)","\t\t\t\t.attr(\"height\", h)","\t\t\t","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","\t\t};","","\t\tvar drawImages = function(obj, imgs) {","\t\t\tfor (var i =0; i < imgs.length ; i++)","\t\t\t{","\t\t\t\tobj.enter()","\t\t\t\t\t.append(\"svg:image\")","\t\t\t\t\t.attr(\"xlink:href\", imgs[i].href)","\t\t\t\t\t.attr(\"x\", imgs[i].x)","\t\t\t\t\t.attr(\"y\", imgs[i].y)","\t\t\t\t\t.attr(\"width\", imgs[i].width)","\t\t\t\t\t.attr(\"height\", imgs[i].height);","\t\t\t}","\t\t};","","","\t\t// Rander Graph...","\t\t$(This.oContaner).hide().empty();","\t\tswitch (this.oOption.type) {","\t\t\tcase 'line' :","\t\t\t\tdrawLineGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'multiLine' :","\t\t\t\tdrawMultiLineGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'bar' :","\t\t\t\tdrawBarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'pie' :","\t\t\t\tdrawPieGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'piePartition' :","\t\t\t\tdrawPiePartitionGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band' :","\t\t\t\tdrawBandGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band2' :","\t\t\t\tdrawBandGraph2(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'radarChart' : ","\t\t\t\tdrawRadarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t}","\t\t$(This.oContaner).show('fast');","","\t}"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":49}},"text":"/* d3.chart.setting.js - D3 Chart Common Library."},{"action":"insertText","range":{"start":{"row":0,"column":49},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":736,"column":0}},"lines":[" \twrit by yi seung-yong(dragonslam@nate.com)"," \tdate, 2014/10/04","*/","if (typeof com == 'undefined') var com = {};","if (typeof com.mad == 'undefined') com.mad = {};","if (typeof com.mad.chart == 'undefined') com.mad.chart = {};","","/** ****************************************************************************","\tChart API ","**/","com.mad.chart.handler = function(obj, option) {","\tif (!d3)\t{","\t\t$debug(\"Not Found D3 Library.\");","\t\tthrow new Error(\"D3 Object Exception\");","\t}","\tthis.oContaner\t= obj;","\tthis.oOption\t= (option instanceof Array) ? option[0] : option;","\tthis.oOptions\t= (option instanceof Array) ? option : null;","};","com.mad.chart.handler.prototype = {","\tlogging : function(msg) {","\t\t$debug(\"com.mad.chart : \"+ msg);","\t},","\tempty : function() {","\t\t$(this.oContaner).hide('slow').empty().show();","\t\treturn this;","\t},","\tmessage : function(t) {","\t\t$(this.oContaner).empty().append(t);","\t\treturn this;","\t},","\tdraw : function(data, addonOption) {","\t\tvar This = this;","\t\tvar D3_Center = function(w, h) {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", (typeof w == 'number') ? w : This.oOption.width)","\t\t\t\t\t.attr(\"height\", (typeof h == 'number') ? h : This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + ((typeof w == 'number') ? w : This.oOption.width) / 2 + \",\" + ((typeof h == 'number') ? h : This.oOption.height) / 2 + \")\");","\t\t};","\t\tvar D3_Axis = function() {","\t\t\treturn d3.select(This.oContaner).append(\"svg\")","\t\t\t\t\t.attr(\"width\", This.oOption.width)","\t\t\t\t\t.attr(\"height\", This.oOption.height)","\t\t\t\t\t.append(\"g\")","\t\t\t\t\t.attr(\"transform\", \"translate(\" + This.oOption.margin.left + \",\" + This.oOption.margin.top + \")\");","\t\t};","","\t\tvar drawLineGraph = function(data, addOption) {","\t\t};","","\t\tvar drawMultiLineGraph = function(data, addOption) {","\t\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.date = This.oOption.format(d.date);","\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\tvar margin = This.oOption.margin;","\t\t\tvar width = This.oOption.width - margin.left - margin.right;","\t\t\tvar height = This.oOption.height - margin.top - margin.bottom;","","\t\t\tvar x = d3.time.scale().range([0, width]);","\t\t\tvar y = d3.scale.linear().range([height, 0]);","\t\t\tvar color\t = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","\t\t\tvar line\t = d3.svg.line()","\t\t\t\t //.interpolate(\"basis\")","\t\t\t\t .x(function(d) { return x(d.date); })","\t\t\t\t .y(function(d) { return y(d.value); });","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks).tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks);","\t\t\t}","\t\t\tcolor.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tvar lineData = color.domain().map(function(name) {","\t\t\t\treturn {","\t\t\t\t\tname: name,","\t\t\t\t\tvalues: data.map(function(d) {","\t\t\t\t\t\treturn {date: d.date, value: +d[name]};","\t\t\t\t\t})","\t\t\t\t};","\t\t\t});","","\t\t\tx.domain(d3.extent(data, function(d) { return d.date; }));","\t\t\ty.domain([","\t\t\t\td3.min(lineData, function(c) { return d3.min(c.values, function(v) { return v.value; }); }),","\t\t\t\td3.max(lineData, function(c) { return d3.max(c.values, function(v) { return v.value; }); })","\t\t\t]);","","\t\t\tvar svg\t = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis);\t","","\t\t\tvar graph= svg.selectAll(\".LineGraph\")","\t\t\t\t.data(lineData)","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tgraph.append(\"path\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss)","\t\t\t\t.attr(\"d\", function(d) { return line(d.values); })","\t\t\t\t.style(\"stroke\", function(d) { return color(d.name); });","","\t\t\tif (This.oOption.showLabels) {\t\t\t","\t\t\t\tgraph.append(\"text\")","\t\t\t\t\t.datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + x(d.value.date) + \",\" + y(d.value.value) + \")\"; })","\t\t\t\t\t.attr(\"x\", 8)","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t//.attr(\"class\", \"lable\")","\t\t\t\t\t.attr(\"font-size\", \"12px\")","\t\t\t\t\t.attr(\"fill\", function(d) { return color(d.name); })","\t\t\t\t\t.text(function(d) { return d.name; });","\t\t\t\t\t","\t\t\t\t\t//","\t\t\t}","\t\t\t","\t\t\tlineData.forEach(function(item) {\t\t\t\t","\t\t\t\tvar point_type = \"circle\",","\t\t\t\t\t point_size = 6,","\t\t\t\t\t point_fill = \"#fff\";","\t\t\t\tif (addOption && addOption.point) {","\t\t\t\t\tpoint_type\t= addOption.point.type;","\t\t\t\t\tpoint_size\t= addOption.point.size;","\t\t\t\t\tpoint_fill\t\t= addOption.point.fill ? color(item.name) : point_fill;","\t\t\t\t}","\t\t\t\tif (point_type == \"circle\") {\t\t\t\t","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"r\", point_size)","\t\t\t\t\t\t\t.attr(\"cx\", function(d, i) { return x(d.date);  })","\t\t\t\t\t\t\t.attr(\"cy\", function(d, i) { return y(d.value); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) { ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size + 2);\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\tvar tX = x(d.date) - 3, ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value) + 3;","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 3;","\t\t\t\t\t\t\t\t\t\ttY = 20;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this).attr('r', point_size);","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t} ","\t\t\t\t","\t\t\t\telse {","\t\t\t\t\tgraph.selectAll(\".point_\"+ item.name)","\t\t\t\t\t\t.data(item.values)","\t\t\t\t\t\t.enter()","\t\t\t\t\t\t.append(point_type)\t\t\t\t","\t\t\t\t\t\t\t.style(\"fill\", point_fill)","\t\t\t\t\t\t\t.style(\"stroke\", color(item.name))","\t\t\t\t\t\t\t.style(\"stroke-width\", \"2px\")","\t\t\t\t\t\t\t.style('opacity', function(d, i) { return (String(d.value).isEmpty() || d.value == '0') ? 0 : 1 })","\t\t\t\t\t\t\t.attr(\"class\", \"point\")","\t\t\t\t\t\t\t.attr(\"width\", point_size)","\t\t\t\t\t\t\t.attr(\"height\", point_size)","\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size + 2).attr(\"height\", point_size + 2)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - ((point_size+2)/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - ((point_size+2)/2); })","\t\t\t\t\t\t\t\t\t;","\t\t\t\t\t\t\t\t\tvar tX = x(d.date), ","\t\t\t\t\t\t\t\t\t\t tY = y(d.value);","\t\t\t\t\t\t\t\t\tif (tY < (22 - margin.top)) {","\t\t\t\t\t\t\t\t\t\ttX = tX + 5;","\t\t\t\t\t\t\t\t\t\ttY = 10;\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t}","//\t\t\t\t\t\t\t\t\ttooltip(true, tX, tY, color(item.name), String(d.value).money());","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\t\t\td3.select(this)","\t\t\t\t\t\t\t\t\t\t.attr(\"width\", point_size).attr(\"height\", point_size)","\t\t\t\t\t\t\t\t\t\t.attr(\"x\", function(d, i) { return x(d.date) - (point_size/2);  })","\t\t\t\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return y(d.value) - (point_size/2); })","\t\t\t\t\t\t\t\t\t;","//\t\t\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t})","\t\t\t\t\t ;","\t\t\t\t}","\t\t\t});","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '5').attr('ry', '5');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"55\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/\t\t\t","\t\t\t$('svg .point').tipsy({ ","\t\t\t\tgravity: 's', ","\t\t\t\thtml: true,","\t\t        fade: true,","\t\t        opacity: 0.95,","\t\t\t\ttitle: function() {","\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\treturn String(d.value).money(); ","\t\t\t\t}","\t\t\t});","\t\t// multi line.","\t\t};","","\t\tvar drawBarGraph = function(data, addOption) {","\t\t","\t\t\tif (typeof This.oOption.format == 'function') {","\t\t\t\tdata.forEach(function(d) {","\t\t\t\t\td.key = This.oOption.format(d.key);","\t\t\t\t});","\t\t\t}","\t\t\tvar option\t= This.oOption;","\t\t\tvar margin\t= option.margin;","\t\t\tvar width\t= option.width - margin.left - margin.right;","\t\t\tvar height\t= option.height - margin.top - margin.bottom;","","\t\t\tvar c\t= d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.ordinal().rangeRoundBands([0, width], .1);","\t\t\tvar y\t= d3.scale.linear().range([height, 0]);","\t\t\tvar xAxis = d3.svg.axis().scale(x).orient(\"bottom\");","\t\t\tvar yAxis = d3.svg.axis().scale(y).orient(\"left\");","","\t\t\tif (addOption.xAxis) {\t\t\t\t","\t\t\t\tif (addOption.xAxis.format)","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks).tickFormat(d3.time.format(addOption.xAxis.format));","\t\t\t\telse ","\t\t\t\t\txAxis.ticks(addOption.xAxis.ticks);","\t\t\t}","\t\t\tif (addOption.yAxis) {","\t\t\t\tif (addOption.yAxis.format)","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%').tickFormat(d3.time.format(addOption.yAxis.format));","\t\t\t\telse ","\t\t\t\t\tyAxis.ticks(addOption.yAxis.ticks, '%');","\t\t\t}","","\t\t\tc.domain(d3.keys(data[0]).filter(function(key) { return key !== \"date\"; }))","\t\t\tx.domain(data.map(function(d) { return d.key; }));","\t\t\ty.domain([0, (d3.max(data, function(d) { return d.value; }) < .1 ? .1 : d3.max(data, function(d) { return d.value; }) )]);","\t\t\tvar blank= x.rangeBand() * .3;","\t\t\tvar svg = D3_Axis();","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"x axis\")","\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")","\t\t\t\t\t.call(xAxis);","\t\t\t\t","\t\t\t\tsvg.append(\"g\")","\t\t\t\t\t.attr(\"class\", \"y axis\")","\t\t\t\t\t.call(yAxis)/*","\t\t\t\t\t.append(\"text\")","\t\t\t\t\t\t.attr(\"transform\", \"rotate(-90)\")","\t\t\t\t\t\t.attr(\"y\", 6)","\t\t\t\t\t\t.attr(\"dy\", \".71em\")","\t\t\t\t\t\t.style(\"text-anchor\", \"end\")","\t\t\t\t\t\t.text(\"Traffic\")","\t\t\t\t*/","\t\t\t\t;","\t\t\t\t\t\t\t\t","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", 0)","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", height);","","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"rect\")","\t\t\t\t\t.attr(\"class\", \"bar2\")","\t\t\t\t\t.style(\"fill\", function(d) { return c(d.key); })","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key) + (blank*.5); })","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.value); })","\t\t\t\t\t.attr(\"width\", x.rangeBand() - blank)","\t\t\t\t\t.attr(\"height\", function(d) { return height - y(d.value); })","\t\t\t\t\t.on(\"mouseover\", function(d) {","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke\", \"#fff\").style(\"stroke-width\", \"5px\").style(\"stroke-opacity\", \".4\");","\t\t\t\t\t\t\tvar tX = x(d.key)-blank;","\t\t\t\t\t\t\tvar tY = y(d.value)+5;","//\t\t\t\t\t\t\ttooltip(true, ((tX > width + margin.right - 110) ? width - 110 : tX), ((tY < (20 - margin.top)) ? 20 : tY), c(d.key), d.text);","\t\t\t\t\t\t}","\t\t\t\t\t})","\t\t\t\t\t.on(\"mouseout\", function(d){ ","\t\t\t\t\t\tif (!String(d.value).isEmpty() && d.value != '0') {","\t\t\t\t\t\t\td3.select(this).style(\"stroke-width\", \"0px\");","//\t\t\t\t\t\t\ttooltip(false);","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t","\t\t\t\t$('svg .bar2').tipsy({ ","\t\t\t\t\tgravity: 's', ","\t\t\t\t\thtml: true,","\t\t\t        fade: true,","\t\t\t        opacity: 0.95,","\t\t\t\t\ttitle: function() {","\t\t\t\t\t\tvar d = this.__data__;","\t\t\t\t\t\treturn d.text; ","\t\t\t\t\t}","\t\t\t\t});","\t\t\tif (option.showLabels) {","\t\t\t\tsvg.selectAll(\".bar\")","\t\t\t\t\t.data(data).enter().append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { return x(d.key); })","\t\t\t\t\t.attr(\"y\", function(d) { ","\t\t\t\t\t\tvar v = y(d.value);","\t\t\t\t\t\treturn (v < 15) ? 15 : (v > height-10 ? height-10 : v); ","\t\t\t\t\t})","\t\t\t\t\t.style(\"fill\", \"#000\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { return (d.value == 0) ? '' : d.text; });","\t\t\t}","/*","\t\t\tvar tooltipBox = svg.append(\"rect\").style('opacity', 1).attr('rx', '3').attr('ry', '3');","\t\t\tvar tooltipText = svg.append('text').style('opacity', 0);\t\t\t","\t\t\tvar tooltip = function(isView, x, y, fill, text) {","\t\t\t\tif (isView) {","\t\t\t\t\ttooltipBox","\t\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t\t.style(\"stroke\", fill).style(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"stroke-opacity\", .8)","\t\t\t\t\t\t.attr(\"x\", x+8).attr(\"y\", y-25).attr(\"width\", \"110\").attr(\"height\", \"20\")","\t\t\t\t\t\t.transition(100).style(\"opacity\", .7);","\t\t\t\t\ttooltipText","\t\t\t\t\t\t.style(\"fill\", fill)","\t\t\t\t\t\t.attr('x', x+12).attr('y', y-10)\t\t\t\t\t\t","\t\t\t\t\t\t.transition(200).style('opacity', 1)","\t\t\t\t\t\t.text(text);","\t\t\t\t}","\t\t\t\telse {","\t\t\t\t\ttooltipBox.style(\"opacity\", 0).attr(\"width\", \"0\").attr(\"height\", \"0\");","\t\t\t\t\ttooltipText.transition(200).text('').style(\"opacity\", 0);","\t\t\t\t}","\t\t\t}","*/","\t\t};","","\t\tvar drawPieGraph = function(data, addOption) ","\t\t{","\t\t\tvar radius = Math.min(This.oOption.width, This.oOption.height) / 2;","\t\t\tvar color = d3.scale.ordinal().range(This.oOption.colors);","\t\t\tvar arc = d3.svg.arc()","\t\t\t\t.outerRadius(radius - This.oOption.arcOuter)","\t\t\t\t.innerRadius(radius - This.oOption.arcInner);","","\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t.value(function(d) { return d.value; });","","\t\t\tvar svg = D3_Center();","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","","\t\t\tvar g = svg.selectAll(\".arc\")","\t\t\t\t.data(pie(data))","\t\t\t\t.enter().append(\"g\")","\t\t\t\t.attr(\"class\", This.oOption.styleCalss);","","\t\t\tg.append(\"path\")","\t\t\t\t.attr(\"d\", arc)","\t\t\t\t.style(\"fill\", function(d) { return color(d.data.name); });","","\t\t\tif (typeof This.oOption.lines == 'object' && This.oOption.lines instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lines instanceof Array) {","\t\t\t\tfor (var i = addOption.lines.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lines[i];","\t\t\t\t\tg.append(\"line\")","\t\t\t\t\t  .attr(\"x1\", s.x1)","\t\t\t\t\t  .attr(\"x2\", s.x2)","\t\t\t\t\t  .attr(\"y1\", s.y1)","\t\t\t\t\t  .attr(\"y2\", s.y2);","\t\t\t\t}","\t\t\t}","","\t\t\tif (typeof This.oOption.lables == 'object' && This.oOption.lables instanceof Array) {","\t\t\t\tfor (var i = This.oOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = This.oOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","\t\t\tif (typeof addOption == 'object' && addOption.lables instanceof Array) {","\t\t\t\tfor (var i = addOption.lables.length-1; i >= 0; i--) {","\t\t\t\t\tvar s = addOption.lables[i];","\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t.attr(\"x\", s.x)","\t\t\t\t\t\t.attr(\"y\", s.y)","\t\t\t\t\t\t.attr(\"class\", s.styleCalss)","\t\t\t\t\t\t.style(\"fill\", s.fill)","\t\t\t\t\t\t.text(\"\"+s.text);","\t\t\t\t}","\t\t\t}","","\t\t\tif (This.oOption.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t.text(function(d) { return d.data.name; });","\t\t\t}","\t\t};","","\t\tvar drawPiePartitionGraph = function(data, addOption) ","\t\t{","\t\t\tif (This.oOptions.length > 0)","\t\t\t{","\t\t\t\tvar svg = D3_Center();","","\t\t\t\tfor (var i = This.oOptions.length-1; i >= 0; i--)","\t\t\t\t{","\t\t\t\t\tvar option = This.oOptions[i];","\t\t\t\t\tvar radius = Math.min(option.width, option.height) / 2;","\t\t\t\t\tvar color = d3.scale.ordinal().range(option.colors);","\t\t\t\t\tvar arc = d3.svg.arc()","\t\t\t\t\t\t.outerRadius(radius - option.arcOuter)","\t\t\t\t\t\t.innerRadius(radius - option.arcInner);","","\t\t\t\t\tvar pie = d3.layout.pie().sort(null)","\t\t\t\t\t\t.value(function(d) { return (d.depth == i) ? d.value : null; });","","\t\t\t\t\t","\t\t\t\t\tif (typeof option.background == 'object' && option.background != null && option.background.length > 0) {","\t\t\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), option.background);","\t\t\t\t\t}","","\t\t\t\t\tvar g = svg.selectAll(\".arc ._\"+ i +\"\")","\t\t\t\t\t\t.data(pie(data))","\t\t\t\t\t\t.enter().append(\"g\")","\t\t\t\t\t\t.attr(\"class\", option.styleCalss);","","\t\t\t\t\tg.append(\"path\")","\t\t\t\t\t\t.attr(\"d\", arc)","\t\t\t\t\t\t.style(\"fill\", function(d) { ","\t\t\t\t\t\t\treturn (d.data.depth == i) ? color(d.data.name) : '#fff'; ","\t\t\t\t\t\t});","\t\t\t\t\t\t","\t\t\t\t\tif (option.showLabels) {","\t\t\t\t\t\tg.append(\"text\")","\t\t\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })","\t\t\t\t\t\t\t.attr(\"dy\", \".35em\")","\t\t\t\t\t\t\t.style(\"text-anchor\", \"middle\")","\t\t\t\t\t\t\t.text(function(d) { return (d.data.value > 0) ? d.data.name : ''; });","\t\t\t\t\t}","\t\t\t\t}// for","\t\t\t}","\t\t};","","\t\tvar drawBandGraph = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", width)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)-20; })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 35; })","\t\t\t\t.style(\"fill\", \"#335\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"900\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return 10; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name) + 5; })","\t\t\t\t.style(\"fill\", \"#fefefe\")","\t\t\t\t.style(\"font-size\", \"13\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.value + d.prepix; });","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t\t","\t\t};","","\t\tvar drawBandGraph2 = function(data, addOption) {","\t\t\tvar option = This.oOption;","\t\t\tvar width = option.width, height = option.height;","\t\t\tvar color\t = d3.scale.ordinal().range(option.colors);","\t\t\tvar x\t= d3.scale.linear().range([0, width - option.margin.right])","\t\t\tvar y\t= d3.scale.ordinal().rangeRoundBands([0, height], .4);","\t\t\tvar xAxis\t = d3.svg.axis().scale(x).orient(\"top\");","","\t\t\tx.domain(d3.extent(data, function(d) { return d.value; })).nice();","\t\t\ty.domain(data.map(function(d) { return d.name; }));","","\t\t\tvar svg = D3_Axis();","\t\t\tvar g  = svg.selectAll(\".axis\")","\t\t\t\t.data(data)","\t\t\t\t.enter()","\t\t\t\t.append(\"g\").attr(\"class\", \"axis\");","\t\t\t\t\t\t","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", \"#b7b7b7\")","\t\t\t\t.attr(\"x\", 0)","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", width-option.margin.right)","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"rect\")","\t\t\t\t.style(\"fill\", function(d) { return color(d.name); })","\t\t\t\t.attr(\"x\", function(d) { return x(Math.min(0, d.value)); })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name); })","\t\t\t\t.attr(\"width\", function(d) { return Math.abs(x(d.value) - x(0)); })","\t\t\t\t.attr(\"height\", y.rangeBand());","","\t\t\tg.append(\"text\")","\t\t\t\t.attr(\"x\", function(d) { return width - option.margin.right + 5; })","\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+2; })","\t\t\t\t.style(\"fill\", \"#666\")","\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t.text(function(d) { return d.text; });","","\t\t\tif (option.showLabels) {","\t\t\t\tg.append(\"text\")","\t\t\t\t\t.attr(\"x\", function(d) { ","\t\t\t\t\t\tvar v = Math.abs(x(d.value) - x(0));\t\t\t\t\t\t","\t\t\t\t\t\treturn  (v < 55) ? v + 5 : v - 50;","\t\t\t\t\t})","\t\t\t\t\t.attr(\"y\", function(d) { return y(d.name)+(y.rangeBand()/2)+3; })","\t\t\t\t\t.style(\"fill\", \"#fff\")","\t\t\t\t\t.style(\"font-size\", \"12\")","\t\t\t\t\t.style(\"font-weight\", \"700\")","\t\t\t\t\t.style(\"text-anchor\", \"left\")","\t\t\t\t\t.text(function(d) { ","\t\t\t\t\t\tvar v = d.value * 100; ","\t\t\t\t\t\treturn (v % 10 == 0 ? v : (v).toFixed(2)) + \"%\"; ","\t\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\t// g.call(xAxis);","\t\t\tg.append(\"line\")","\t\t\t  .attr(\"x1\", x(0))","\t\t\t  .attr(\"x2\", x(0))","\t\t\t  .attr(\"y2\", height);","","\t\t\tif (option && typeof option.image == 'object' && option.image != null && option.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), option.image);","\t\t\t}","\t\t\tif (addOption && typeof addOption.image == 'object' && addOption.image != null && addOption.image.length > 0) {","\t\t\t\tdrawImages(g.selectAll(\"image\").data([0]), addOption.image);","\t\t\t}","\t\t};","\t\t","\t\tvar drawRadarGraph = function(data, addOption) {","\t\t\tvar w = This.oOption.width,","\t\t\t\th = This.oOption.height;","","\t\t\t//Options for the Radar chart, other than default","\t\t\tvar mycfg = {","\t\t\t\tw: w-130,","\t\t\t\th: h-50,","\t\t\t\tmaxValue: 1,","\t\t\t\tlevels: 5,","\t\t\t\tTranslateX: 45,","\t\t\t\tTranslateY: 32,","\t\t\t\tExtraWidthX: 140,","\t\t\t\tExtraWidthY: 50,","\t\t\t\tcolor : d3.scale.ordinal().range(This.oOption.colors),","\t\t\t\tviewLevel : This.oOption.showLabels,","\t\t\t\tviewLable : This.oOption.showLabels","\t\t\t};","","\t\t\t//Call function to draw the Radar chart","\t\t\t//Will expect that data is in %'s","\t\t\tRadarChart.draw(This.oContaner, data, mycfg);","","\t\t\tvar svg = d3.select(This.oContaner)","\t\t\t\t.selectAll('svg')","\t\t\t\t.append('svg')","\t\t\t\t.attr(\"width\", w)","\t\t\t\t.attr(\"height\", h)","\t\t\t","\t\t\tif (typeof This.oOption.background == 'object' ","\t\t\t\t&& This.oOption.background != null && This.oOption.background.length > 0) ","\t\t\t{","\t\t\t\tdrawImages(svg.selectAll(\"image\").data([0]), This.oOption.background);","\t\t\t}","\t\t};","","\t\tvar drawImages = function(obj, imgs) {","\t\t\tfor (var i =0; i < imgs.length ; i++)","\t\t\t{","\t\t\t\tobj.enter()","\t\t\t\t\t.append(\"svg:image\")","\t\t\t\t\t.attr(\"xlink:href\", imgs[i].href)","\t\t\t\t\t.attr(\"x\", imgs[i].x)","\t\t\t\t\t.attr(\"y\", imgs[i].y)","\t\t\t\t\t.attr(\"width\", imgs[i].width)","\t\t\t\t\t.attr(\"height\", imgs[i].height);","\t\t\t}","\t\t};","","","\t\t// Rander Graph...","\t\t$(This.oContaner).hide().empty();","\t\tswitch (this.oOption.type) {","\t\t\tcase 'line' :","\t\t\t\tdrawLineGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'multiLine' :","\t\t\t\tdrawMultiLineGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'bar' :","\t\t\t\tdrawBarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'pie' :","\t\t\t\tdrawPieGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'piePartition' :","\t\t\t\tdrawPiePartitionGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band' :","\t\t\t\tdrawBandGraph(data, addonOption);","\t\t\t\tbreak;","","\t\t\tcase 'band2' :","\t\t\t\tdrawBandGraph2(data, addonOption);","\t\t\t\tbreak;","\t\t\t","\t\t\tcase 'radarChart' : ","\t\t\t\tdrawRadarGraph(data, addonOption);","\t\t\t\tbreak;","\t\t}","\t\t$(This.oContaner).show('fast');","","\t}"]},{"action":"insertText","range":{"start":{"row":736,"column":0},"end":{"row":736,"column":2}},"text":"};"}]}]]},"ace":{"folds":[],"scrolltop":3000,"scrollleft":0,"selection":{"start":{"row":20,"column":35},"end":{"row":20,"column":35},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1414390147985,"hash":"bcadb29e98584657a0624f9282a6f6f118e7d9fb"}