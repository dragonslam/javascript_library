{"ts":1361930452435,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1361937929381,"patch":[[{"diffs":[[1,"/* \r\n    @name Flyweight Pattern - By javarouka (MIT Licensed)    \r\n    @url http://blog.javarouka.me/2012/02/javascripts-pattern-3-flyweight-pattern.html\r\n*/\r\n\r\nvar Unit = function(name, maxhp, cost) {\r\n    this.name = name;\r\n    this.maxhp = maxhp;\r\n    this.cost = cost;    \r\n}\r\n\r\nvar UnitCreator = (function() {\r\n    \r\n    // 한번 생성한 객체는 다시 생성하지 않기 위한 저장소\r\n    // private 이다.\r\n    var units = {};\r\n\r\n    // 모듈 패턴을 사용한 public 속성들\r\n    return {\r\n        create: function(name, maxhp, cost) {\r\n \r\n            var unit = units[name];\r\n\r\n            // 저장소에 이미 있다면 그것을 리턴\r\n            if(unit) {\r\n                return unit;\r\n            }\r\n\r\n            // 없다면 생성하고 저장소에 저장\r\n            else {\r\n                units[name] = new Unit(name, maxhp, cost);\r\n                return units[name];\r\n            }\r\n        }\r\n    } \r\n    \r\n})();\r\n\r\nvar UnitController = (function() {\r\n    \r\n    // 플라이웨이트 객체를 관리할 맵\r\n    // 역시 private 속성.\r\n    var unitsPlayedDictionary = {};\r\n\r\n    var self = this;\r\n\r\n    // 모듈 패턴을 사용한 public 속성들\r\n    return {\r\n        produceUnit: function(id, name, maxhp, cost, player) {\r\n            \r\n            var unit = UnitCreator.create(name, maxhp, cost);\r\n            \r\n            // 공유 자원과 객체 특성을 조합 (컴포지트 패턴)\r\n            var unitOnPlay = {\r\n                unit: unit,\r\n                id: id,\r\n                player: player,\r\n                currentHp: unit.maxHp,\r\n                upgrade: 0                \r\n            };\r\n            unitsPlayedDictionary[id] = unitOnPlay;\r\n        },     \r\n\r\n        kill: function(id) {\r\n            var unit = unitsPlayedDictionary[id];\r\n            if(unit) {\r\n                unit.currentHp = 0;\r\n                delete unitsPlayedDictionary[id];\r\n            }\r\n        },\r\n        \r\n        upgradePower: function(id) {\r\n            var unit = unitsPlayedDictionary[id];\r\n            if(unit) {\r\n                unit.upgrade = unit.upgrade + 1;\r\n            }\r\n        },\r\n        \r\n       /* 기타 메서드들 ... */\r\n    }    \r\n    \r\n})();"]],"start1":0,"start2":0,"length1":0,"length2":2005}]],"length":2005,"saved":false}
